(()=>{console.log("Hello World! (from jonathanbossenger-ai-services-demo block)");const e=e=>{const t=e.querySelector(".ai-chat__messages"),a=e.querySelector(".ai-chat__form"),o=e.querySelector(".ai-chat__input");if(!t||!a||!o)return;const s=(e,a)=>{const o=document.createElement("div");o.className=`ai-chat__message ai-chat__message--${e}`,o.textContent=a,t.appendChild(o),t.scrollTop=t.scrollHeight},n=e=>{a.querySelector('button[type="submit"]').disabled=!!e,o.disabled=!!e};a.addEventListener("submit",async t=>{t.preventDefault();const a=o.value.trim();if(a){s("user",a),o.value="",n(!0);try{const t=await fetch(window.aiServicesDemo?.restUrl||"/wp-json/ai-services-demo/v1/chat",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.aiServicesDemo?.nonce||""},body:JSON.stringify({message:a,instance:e.dataset.instance||""})});if(!t.ok)throw new Error("Request failed");const o=await t.json();s("assistant",o?.reply||"")}catch(e){s("assistant","Sorry, something went wrong.")}finally{n(!1)}}})};window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-jonathanbossenger-ai-services-demo .ai-chat").forEach(e)})})();